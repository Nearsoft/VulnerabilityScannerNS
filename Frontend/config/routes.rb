Rails.application.routes.draw do

  root 'home#show', as: 'home'

  get '/scan_urls', to: 'scan_urls#index', as: 'scan_urls'

  get 'dashboard', to: "dashboard#index", as: "dashboard"

  # match "/404", :to => "errors#routing", :via => :all
  #
  # match "/500", :to => "errors#internal_server_error", :via => :all

  resources :configuration

  resources :analized_site


  resources :notifications do
    collection do
      post :mark_as_read
    end
  end

  namespace :api do
    namespace :v1 do
      post '/notify', to: 'notify#notify'
    end
  end

  post '/scanner', to: 'scan_urls#analize', as: 'analysis_url'

  Rails.application.routes.draw do
        devise_for :users, controllers: {
          sessions: 'users/sessions',
          :registrations => 'users/registrations'
        }
      end

end
